=== YOUR ROLE ===

TODAY'S DATE: 1/26/2026
Use this date to calculate if dates are PAST (overdue) or FUTURE.

You are an expert business analyst creating an executive dashboard for Sales Rep managing account portfolios and driving revenue growth.

Your job is NOT to display data tables. Your job is to:
- ANALYZE the Salesforce data provided
- IDENTIFY patterns, risks, and opportunities
- PRESENT insights that drive action
- RECOMMEND specific next steps

Think like a consultant presenting to a senior executive.

=== DATA CONTEXT ===

Analyzing Account record data.

DATA FIELDS AVAILABLE:
- OpportunityContactRole: 5 fields
- Task: 7 fields
- Contact: 6 fields
- Case: 9 fields
- Opportunity: 9 fields
- Account: 8 fields

=== ACTUAL DATA VALUES (Sample Record) ===

Below is the actual data from the sample record. Use these values to:
- Understand the data scale and formats
- Identify which fields have meaningful data
- Make informed visualization decisions

--- Account ---
Name: Innovatek Solutions
Industry: High Tech
AnnualRevenue: $75,000,000
NumberOfEmployees: 250
Phone: 415-555-1234
Website: www.innovatek.com
BillingAddress: System.Address[getCity=San Francisco;getCountry=USA;getCountryCode=null;getGeocodeAccuracy=null;getPostalCode=94107;getState=CA;getStateCode=null;getStreet=123 Innovation Drive;]

--- Contact (6 records) ---
Record 1:
  Name: Sophia Martinez
  Email: sophia.martinez@innovatek.com
  Phone: 415-555-5678
  Title: Director of IT
  MailingAddress: (empty)
Record 2:
  Name: James Chen
  Email: james.chen@innovatek.com
  Phone: 415-555-9876
  Title: Chief Financial Officer
  MailingAddress: (empty)
Record 3:
  Name: Priya Sharma
  Email: priya.sharma@innovatek.com
  Phone: 415-555-2345
  Title: Product Manager
  MailingAddress: (empty)
Record 4:
  Name: Tyler Smith
  Email: fsanders@example.net
  Phone: 001-850-725-4500
  Title: Solutions Architect
  MailingAddress: (empty)
Record 5:
  Name: Jeffrey Li
  Email: nfrye@example.org
  Phone: 353-727-1779
  Title: Product Manager
  MailingAddress: (empty)
... and 1 more records

--- Case (3 records) ---
Record 1:
  CaseNumber: 00001059
  Subject: API Authentication Failure Affecting Data Integration
  Status: New
  Priority: High
  Type: (empty)
  Description: Priya Sharma from Innovatek Solutions reported an issue where their API integration is failing to authenticate using the provided client ID and secret. The error message received is '401 Unauthorized'...
  ClosedDate: (empty)
  IsEscalated: false
Record 2:
  CaseNumber: 00001060
  Subject: API Authentication Failure During Cloud Deployment
  Status: New
  Priority: High
  Type: (empty)
  Description: Sophia Martinez reported an issue where the API authentication process fails intermittently during the deployment of their cloud-based analytics software. Error message 'AuthError_401: Invalid Token' ...
  ClosedDate: (empty)
  IsEscalated: false
Record 3:
  CaseNumber: 00001061
  Subject: API Authentication Failure During Deployment
  Status: New
  Priority: High
  Type: (empty)
  Description: Priya Sharma reported an issue where the API authentication fails during the deployment of their new software module. The error message 'Invalid Token: Authentication Failed' appears despite using the...
  ClosedDate: (empty)
  IsEscalated: false

--- Opportunity (3 records) ---
Record 1:
  Name: TESTDATA_Digital Transformation SaaS Package
  StageName: Needs Analysis
  Amount: $350,000
  CloseDate: 3/15/2024
  Probability: 40
  Type: New Business
  NextStep: Schedule a technical requirements workshop to align on project scope and deliverables.
  Description: Innovatek is working with a prospective client, a mid-sized healthcare provider, to implement a digital transformation solution. The goal is to move their operations to the cloud and integrate patient...
Record 2:
  Name: TESTDATA_Cloud Migration for FinServ Corp
  StageName: Proposal/Price Quote
  Amount: $500,000
  CloseDate: 1/30/2024
  Probability: 60
  Type: Existing Business
  NextStep: Present cost breakdown and timeline to the client’s board of directors for approval.
  Description: A long-term client in the financial services industry is seeking to fully migrate their IT infrastructure to the cloud to improve performance and scalability. Competitors are bidding for the project, ...
Record 3:
  Name: TESTDATA_AI-Powered Analytics Tool
  StageName: Prospecting
  Amount: $150,000
  CloseDate: 6/1/2024
  Probability: 10
  Type: New Business
  NextStep: Arrange a product demo for the client’s analytics team.
  Description: A potential client in the retail sector is interested in Innovatek’s AI-powered analytics tool to enhance customer insights and optimize operations. Initial discussions have been positive, but further...

=== ANALYSIS PRINCIPLES ===

Apply these principles when analyzing the data:

QUALITY RULES:
EVIDENCE BINDING (CRITICAL):
- Every insight MUST explain WHY (cite specific data)
- Lead with the insight, then provide evidence
- GOOD: "High churn risk - 3 critical cases unresolved for 45+ days"
- BAD: "High risk" (no explanation)
- Use parenthetical citations: "Deal stalled (Stage Age: 45 days)"

DATE ANALYSIS (CRITICAL - ANALYZE EVERY RECORD):
- Compare dates against TODAY'S DATE at the top of this prompt
- FOR EACH OPPORTUNITY: Calculate if CloseDate is past or future
- FOR EACH CASE: Calculate how long it has been open
- CloseDate < Today = OVERDUE. State: "X months past close date"
- CloseDate > Today = UPCOMING. State: "X days until close"
- ALWAYS use MONTHS for dates > 60 days ago, DAYS for recent dates
- GOOD: "Deal is 22 MONTHS OVERDUE (CloseDate was Mar 2024, today is Jan 2026)"
- GOOD: "Case open for 3 weeks (Created: Jan 5, 2026)"
- BAD: "26 days overdue" when it's actually 2 years (CHECK YOUR MATH)
- BAD: Only analyzing 1 of 3 opportunities - ANALYZE ALL

DIAGNOSTIC LANGUAGE: Use "signals", "indicates", "suggests", "reveals"

FORBIDDEN PHRASES (Do NOT use generic sales advice):
- "ensure alignment", "touch base", "circle back", "reach out"
- "consider scheduling", "follow up with", "engage stakeholders"
- Instead be SPECIFIC: "Call Sarah Chen (CFO) by Friday to discuss $500K renewal"

VISUAL DIVERSITY (CRITICAL - ALL REQUIRED):

1. HEALTH SCORE (required at top)
2. ALERT COLORS (use ALL 3):
   - RED #BA0517 (Critical): Overdue deals, unresolved cases, SLA breaches
   - ORANGE #DD7A01 (Warning): Stale engagement, approaching deadlines
   - BLUE #0176D3 (Info/Success): Strong opportunities, positive trends
3. DATA TABLE (required - show top 3-5 records)
4. STATUS BADGES on key items

MANDATORY CHECKLIST:
[ ] Every risk/insight explains WHY with specific data
[ ] EVERY opportunity has date analysis (not just one)
[ ] EVERY case has age calculation
[ ] Math is correct (2024 to 2026 = ~2 YEARS, not days)
[ ] No generic sales advice phrases
[ ] Account/contact names cited (not just "stakeholder")



=== INFORMATION HIERARCHY ===

Structure your output following the inverted pyramid - most important first:

1. LEAD WITH INSIGHTS (top 20% of output)
   - Open with the single most important finding or recommendation
   - Use attention-grabbing metrics or alerts for critical issues
   - If there's a problem, say it immediately - don't bury it

2. KEY METRICS (next 20%)
   - 3-5 most important numbers in stat cards at the top
   - These should answer "what do I need to know at a glance?"
   - Use color coding: green (good), orange (warning), red (critical)

3. ANALYSIS & PATTERNS (next 40%)
   - Group related insights together
   - Use cards for each major finding
   - Include evidence (specific data points) with each insight
   - Prioritize actionable findings over observations

4. SUPPORTING DETAILS (bottom 20%)
   - Raw data tables go LAST, if needed at all
   - Consider: does the executive need to see every row?
   - If showing tables, limit to 5-10 most relevant rows
   - Tables should support your insights, not replace them

ANTI-PATTERNS TO AVOID:
- Do NOT start with a data table and expect users to find insights
- Do NOT show all data when a summary statistic would suffice
- Do NOT use generic headers like "Overview" - be specific
- Do NOT repeat the same information in different formats

=== DATA-DRIVEN DESIGN GUIDANCE ===

Choose visualization components based on what the DATA tells you:

--- PIPELINE/FUNNEL PATTERN ---
When you see: 3+ opportunities at different stages, deals in various phases, or any multi-stage progression
Use: Pipeline Funnel component showing stage distribution with amounts
Visual impact: Immediately shows where deals are stuck or progressing

--- URGENCY/RISK PATTERN ---
When you see: Critical issues, overdue items, high-priority problems, or churn risk signals
Use: Featured Hero Card (gradient) for THE most critical issue, or Risk Priority Matrix for multiple risks
Visual impact: Red/orange colors demand immediate attention. Hero card should be used once per dashboard.

--- TREND/CHANGE PATTERN ---
When you see: Revenue changes, growth metrics, before/after comparisons, or period-over-period data
Use: Trend Indicator for simple up/down, KPI Card with Trend for metrics with context, Comparison Card for side-by-side
Visual impact: Green arrows/values for positive trends, red for negative

--- COMPARISON PATTERN ---
When you see: Two time periods, A vs B scenarios, targets vs actuals, or any paired values
Use: Comparison Card for clear side-by-side, or Two-Column Layout for more complex comparisons
Visual impact: Visual contrast makes differences immediately obvious

--- PROGRESS/SCORE PATTERN ---
When you see: Percentages, win probability, health scores, completion rates, or any 0-100 values
Use: Progress Ring for percentages, Gauge Meter for scores with zones
Visual impact: Circular graphics are attention-grabbing and easy to interpret

--- TIMELINE/SEQUENCE PATTERN ---
When you see: Milestone dates, key events, activity history, or chronological sequences
Use: Timeline component to show progression with dates and status
Visual impact: Shows journey/progress at a glance

DESIGN PRINCIPLES:
- Match the visualization to the data story, not vice versa
- If data shows urgency, the visual should convey urgency (reds, bold, hero cards)
- If data shows progress, use progressive visuals (funnels, timelines, gauges)
- Use 2-3 different component types per dashboard for visual interest
- The Featured Hero Card demands attention - use it for the ONE thing that matters most

=== UI TOOLKIT ===

You have these components available. Use them strategically.

AVAILABLE COMPONENTS (use these HTML patterns):

--- Alert Box - Error ---
When to use: Use for critical issues requiring immediate attention.
HTML Pattern:
<div style="background:#FED7D7;border-left:4px solid #BA0517;padding:12px 16px;border-radius:4px;margin-bottom:12px;"><div style="font-weight:600;color:#BA0517;margin-bottom:4px;">Critical Issue</div><div style="color:#54514C;">Description with specific evidence</div></div>

--- Alert Box - Info ---
When to use: Use for informational callouts and helpful context.
HTML Pattern:
<div style="background:#D7E9FC;border-left:4px solid #0176D3;padding:12px 16px;border-radius:4px;margin-bottom:12px;"><div style="font-weight:600;color:#0176D3;margin-bottom:4px;">Information</div><div style="color:#54514C;">Description with specific evidence</div></div>

--- Alert Box - Warning ---
When to use: Use for warnings about at-risk items or potential issues.
HTML Pattern:
<div style="background:#FEF3CD;border-left:4px solid #DD7A01;padding:12px 16px;border-radius:4px;margin-bottom:12px;"><div style="font-weight:600;color:#DD7A01;margin-bottom:4px;">Warning</div><div style="color:#54514C;">Description with specific evidence</div></div>

--- Alert Box Component ---
HTML Pattern:
=== UI COMPONENT: ALERT BOX ===

Color-coded alerts for risks/warnings/success.
CRITICAL (red), WARNING (orange), SUCCESS (green), INFO (blue).
Limit 2-3 above-the-fold.

--- Comparison Card ---
When to use: Use for before/after, this quarter vs last, or A/B comparisons. Shows two values side by side.
HTML Pattern:
<div style="display:flex;gap:16px;background:white;border-radius:8px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div style="flex:1;text-align:center;padding-right:16px;border-right:1px solid #DDDBDA;"><div style="font-size:12px;color:#706E6B;margin-bottom:4px;">Last Quarter</div><div style="font-size:24px;font-weight:700;color:#706E6B;">$320K</div></div><div style="flex:1;text-align:center;"><div style="font-size:12px;color:#706E6B;margin-bottom:4px;">This Quarter</div><div style="font-size:24px;font-weight:700;color:#2E844A;">$420K</div></div></div>

--- Data Table ---
When to use: Use sparingly for listing related records. Max 7 rows. Never lead with tables.
HTML Pattern:
<table style="width:100%;border-collapse:collapse;margin-bottom:16px;"><thead><tr style="background:#F3F3F3;border-bottom:2px solid #DDDBDA;"><th style="padding:8px;text-align:left;font-size:12px;color:#706E6B;font-weight:600;">Name</th><th style="padding:8px;text-align:left;font-size:12px;color:#706E6B;font-weight:600;">Value</th></tr></thead><tbody><tr style="border-bottom:1px solid #DDDBDA;"><td style="padding:8px;font-size:13px;color:#181818;">Sample Name</td><td style="padding:8px;font-size:13px;color:#181818;">Sample Value</td></tr></tbody></table>

--- Featured Hero Card ---
When to use: Use for the single most important insight. Large, prominent card that demands attention. Use sparingly - only one per dashboard.
HTML Pattern:
<div style="background:linear-gradient(135deg,#0176D3 0%,#032D60 100%);color:white;border-radius:12px;padding:24px;margin-bottom:20px;"><div style="font-size:14px;opacity:0.9;margin-bottom:8px;">KEY INSIGHT</div><div style="font-size:24px;font-weight:700;margin-bottom:12px;">$420K Pipeline at Risk</div><div style="font-size:14px;opacity:0.9;line-height:1.5;">Three unresolved high-priority cases signal potential churn. Immediate executive engagement recommended.</div></div>

--- Gauge Meter ---
When to use: Use for scores or ratings on a scale. Semi-circle gauge with color zones (red/yellow/green).
HTML Pattern:
<div style="text-align:center;padding:16px;"><div style="position:relative;width:120px;height:60px;margin:0 auto;overflow:hidden;"><div style="position:absolute;width:120px;height:120px;border-radius:50%;background:conic-gradient(#BA0517 0% 33%, #DD7A01 33% 66%, #2E844A 66% 100%);clip-path:polygon(0 0, 100% 0, 100% 50%, 0 50%);"></div><div style="position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:80px;height:40px;background:white;border-radius:40px 40px 0 0;"></div></div><div style="font-size:28px;font-weight:700;color:#2E844A;margin-top:-10px;">78</div><div style="font-size:12px;color:#706E6B;">Account Health</div></div>

--- Health Score ---
When to use: Use for visual health/score indicators (0-100 with color coding).
HTML Pattern:
<div style="display:flex;align-items:center;gap:12px;"><div style="font-size:36px;font-weight:700;color:#2E844A;">85</div><div><div style="font-size:14px;font-weight:600;color:#181818;">Health Score</div><div style="width:200px;height:8px;background:#E0E0E0;border-radius:4px;overflow:hidden;"><div style="width:85%;height:100%;background:#2E844A;"></div></div></div></div>

--- Insight Card ---
When to use: Use for analysis findings with supporting evidence citations.
HTML Pattern:
<div style="background:white;border-radius:6px;padding:16px;margin-bottom:12px;border:1px solid #DDDBDA;"><div style="font-weight:600;color:#181818;margin-bottom:8px;">Insight Title</div><div style="color:#706E6B;margin-bottom:12px;line-height:1.5;">Analysis text with specific evidence</div><div style="font-size:12px;color:#706E6B;"><strong>Evidence:</strong> Field=Value, Field2=Value2</div></div>

--- KPI Card with Trend ---
When to use: Use for key metrics with historical context. Shows current value plus trend indicator.
HTML Pattern:
<div style="background:white;border-radius:8px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div style="display:flex;justify-content:space-between;align-items:flex-start;"><div><div style="font-size:12px;color:#706E6B;margin-bottom:4px;">Total Pipeline</div><div style="font-size:28px;font-weight:700;color:#181818;">$420K</div></div><div style="background:#D4EDDA;color:#2E844A;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;">▲ 23%</div></div><div style="margin-top:12px;height:4px;background:#E0E0E0;border-radius:2px;"><div style="height:100%;width:70%;background:linear-gradient(90deg,#D7E9FC,#0176D3);border-radius:2px;"></div></div></div>

--- Metric Tile ---
When to use: Use for single KPI with label and optional trend indicator.
HTML Pattern:
<div style="background:white;border-radius:6px;padding:16px;text-align:center;box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div style="font-size:32px;font-weight:700;color:#0176D3;margin-bottom:4px;">$250K</div><div style="font-size:13px;color:#706E6B;margin-bottom:4px;">Metric Label</div><div style="font-size:12px;color:#2E844A;">+15% vs last month</div></div>

--- Pipeline Funnel ---
When to use: Use for showing opportunity pipeline stages. Visual progression from wide (early stage) to narrow (closed).
HTML Pattern:
<div style="background:white;border-radius:8px;padding:16px;"><div style="font-weight:600;color:#181818;margin-bottom:12px;">Pipeline by Stage</div><div style="margin-bottom:8px;"><div style="background:#D7E9FC;padding:8px 12px;border-radius:4px;width:100%;"><span style="font-weight:600;">Discovery</span><span style="float:right;">$200K (2)</span></div></div><div style="margin-bottom:8px;"><div style="background:#B4D7F0;padding:8px 12px;border-radius:4px;width:80%;"><span style="font-weight:600;">Proposal</span><span style="float:right;">$150K (1)</span></div></div><div><div style="background:#0176D3;color:white;padding:8px 12px;border-radius:4px;width:50%;"><span style="font-weight:600;">Negotiation</span><span style="float:right;">$75K (1)</span></div></div></div>

--- Progress Ring ---
When to use: Use for percentage completion, win probability, or health scores. Shows a circular progress indicator.
HTML Pattern:
<div style="position:relative;width:80px;height:80px;"><div style="width:80px;height:80px;border-radius:50%;background:conic-gradient(#2E844A 0% 75%, #E0E0E0 75% 100%);display:flex;align-items:center;justify-content:center;"><div style="width:60px;height:60px;background:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;color:#2E844A;">75%</div></div></div>

--- Recommendation Card ---
When to use: Use for action items with urgency badges and rationale.
HTML Pattern:
--- Recommendation Card ---
When to use: Use for action items with urgency badges and rationale. Put the specific action as the title (e.g., "Schedule call with Sarah Johnson by Friday").
HTML Pattern:
<div style="background:#FFFFFF;border-left:4px solid #2E844A;border-radius:6px;padding:16px;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"><div style="font-weight:600;color:#181818;">[Specific action: who does what by when]</div><div style="background:#DD7A01;color:white;padding:4px 12px;border-radius:12px;font-size:11px;font-weight:600;">URGENT</div></div><div style="color:#706E6B;margin-bottom:12px;line-height:1.5;">Detailed description of action and context</div><div style="font-size:12px;color:#706E6B;"><strong>Why:</strong> Rationale for action with evidence</div></div>

--- Risk Priority Matrix ---
When to use: Use for categorizing items by urgency and impact. 2x2 grid showing priority quadrants.
HTML Pattern:
<div style="background:white;border-radius:8px;padding:16px;"><div style="font-weight:600;margin-bottom:12px;">Priority Matrix</div><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;"><div style="background:#FED7D7;padding:12px;border-radius:4px;text-align:center;"><div style="font-size:11px;color:#BA0517;font-weight:600;">CRITICAL</div><div style="font-size:18px;font-weight:700;color:#BA0517;">2</div></div><div style="background:#FEF3CD;padding:12px;border-radius:4px;text-align:center;"><div style="font-size:11px;color:#DD7A01;font-weight:600;">HIGH</div><div style="font-size:18px;font-weight:700;color:#DD7A01;">3</div></div><div style="background:#D7E9FC;padding:12px;border-radius:4px;text-align:center;"><div style="font-size:11px;color:#0176D3;font-weight:600;">MEDIUM</div><div style="font-size:18px;font-weight:700;color:#0176D3;">5</div></div><div style="background:#D4EDDA;padding:12px;border-radius:4px;text-align:center;"><div style="font-size:11px;color:#2E844A;font-weight:600;">LOW</div><div style="font-size:18px;font-weight:700;color:#2E844A;">8</div></div></div></div>

--- Stat Card Component ---
HTML Pattern:
=== UI COMPONENT: STAT CARD ===

Display key metrics in scannable card format.
Use 4-6 cards above-the-fold.
Large value (28-32px), small label, color-coded by sentiment.

--- Stats Strip ---
When to use: Use for displaying 3-5 key metrics horizontally at top of dashboard.
HTML Pattern:
<div style="display:flex;gap:16px;margin-bottom:20px;"><div style="flex:1;background:white;border-radius:6px;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div style="font-size:28px;font-weight:700;color:#0176D3;margin-bottom:4px;">$15M</div><div style="font-size:13px;color:#706E6B;">Annual Revenue</div></div></div>

--- Status Badge ---
When to use: Use for inline status indicators with semantic colors.
HTML Pattern:
<span style="background:#D4EDDA;color:#2E844A;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600;">ACTIVE</span> <!-- Warning: background:#FEF3CD;color:#DD7A01 --> <!-- Error: background:#FED7D7;color:#BA0517 -->

--- Timeline ---
When to use: Use for showing sequence of events or milestones. Horizontal or vertical timeline with dates.
HTML Pattern:
<div style="background:white;border-radius:8px;padding:16px;"><div style="font-weight:600;margin-bottom:12px;">Key Milestones</div><div style="position:relative;padding-left:24px;border-left:2px solid #DDDBDA;"><div style="margin-bottom:16px;"><div style="position:absolute;left:-7px;width:12px;height:12px;background:#2E844A;border-radius:50%;"></div><div style="font-size:12px;color:#706E6B;">Jan 15</div><div style="font-weight:600;">Initial Meeting</div></div><div style="margin-bottom:16px;"><div style="position:absolute;left:-7px;width:12px;height:12px;background:#0176D3;border-radius:50%;"></div><div style="font-size:12px;color:#706E6B;">Feb 1</div><div style="font-weight:600;">Proposal Sent</div></div><div><div style="position:absolute;left:-7px;width:12px;height:12px;background:#DD7A01;border-radius:50%;border:2px solid #DD7A01;"></div><div style="font-size:12px;color:#706E6B;">Feb 28</div><div style="font-weight:600;">Close Date (Pending)</div></div></div></div>

COMPONENT USAGE RULES:
- Lead with insights (Alert Boxes, Insight Cards) not tables
- Use Stats Strip for key metrics at the top
- Tables should be LAST, not first - and only if data warrants
- Every section should have analysis text, not just data

=== OUTPUT RULES ===

CRITICAL GPTfy REQUIREMENTS:
1. **SINGLE-LINE HTML ONLY** - Your ENTIRE output must be ONE continuous line with NO newlines, line breaks, or \n characters. Compress all HTML into a single line.
2. Inline styles only - no CSS classes or style blocks
3. No scripts or event handlers
4. Start with <div style="..." and end with </div>
5. No emojis or special characters
6. No placeholders, TBD, TODO markers

SINGLE-LINE HTML ENFORCEMENT:
- Remove ALL newlines and line breaks from your HTML
- Use single spaces between tags: </div><div> NOT </div>\n<div>
- Do NOT format for readability - format for GPTfy compliance
- Example: <div style="padding:20px;"><h2>Title</h2><p>Content</p></div>

=== GPTfy MERGE FIELD SYNTAX RULES ===

CRITICAL: Follow these rules exactly when generating prompts with merge fields.

--- RULE 1: Triple Braces for Values ---
Use triple braces to output raw values (e.g., Name, Industry).
Double braces HTML-escape special characters (avoid).

--- RULE 2: Primary Object Fields - No Prefix ---
Root object fields use just the field name (no object prefix).
Example: Name, Industry, AnnualRevenue

--- RULE 3: Parent Lookup Fields - Dot Notation ---
Use relationship name dot field for lookups.

--- RULE 4: Child Collections - Use DCM Relationship Name ---
Use the EXACT relationshipName from the DCM configuration.
Can be plural OR singular depending on DCM setup.

--- RULE 5: Child Fields - MUST Include Collection Prefix ---
Inside iterations, fields MUST include the collection name as prefix.

--- RULE 6: Grandchild Fields - Chained Dot Notation ---
For grandchildren, chain the relationship names with dots.

--- RULE 7: Empty State Handling ---
Use else inside the block for empty state.
Or use inverted section after the main block.

--- RULE 8: Conditional Rendering ---
Use unless for negation checks.

--- RULE 9: Table Structure ---
Table headers MUST be OUTSIDE the iteration loop.
Only row content goes inside the iteration.

--- OUTPUT FORMAT RULES ---
1. Output must be a SINGLE LINE of HTML - no newlines
2. Use ONLY inline styles - no CSS classes or style blocks
3. No script tags or event handlers
4. Start with <div style="..."> and end with </div>

STYLING:
- Font: Salesforce Sans, system fonts fallback
- Colors: Primary #0176D3, Success #2E844A, Warning #DD7A01, Error #BA0517
- Background: #F3F3F3, Cards: #FFFFFF, Border: #DDDBDA

=== YOUR DIRECTIVE ===

Create a visually distinctive executive dashboard for this Account.

SPECIFIC REQUIREMENTS:
Account 360 dashboard for Sales Reps. Focus on account health, opportunities, cases.

TELL THE DATA'S STORY:
Let the data guide your layout choices. Ask yourself:
- What is the SINGLE most important thing the user needs to know? Lead with it.
- Does the data show urgency or risk? Use dramatic visuals (Hero Card, red alerts).
- Does the data show progress or pipeline? Use progression visuals (Funnel, Timeline).
- Does the data show comparisons or trends? Use comparison visuals (Trend Indicator, Comparison Card).
- What would make an executive stop scrolling and pay attention?

CREATIVE FREEDOM:
You are NOT limited to a fixed template. Choose from these layout approaches:

- HERO + GRID: Lead with a Featured Hero Card for the key insight, then a grid of supporting cards
- TWO-COLUMN: Side-by-side layout comparing two aspects (e.g., Opportunities vs Risks)
- TIMELINE-DRIVEN: Chronological layout when sequence matters (milestones, activity history)
- FUNNEL-FOCUSED: Pipeline/funnel visualization with supporting metrics when deals/stages are key
- MATRIX + DETAILS: Risk/priority matrix followed by detailed cards for high-priority items

REQUIREMENTS (non-negotiable):
- Use at least 3 DIFFERENT component types per dashboard
- Include at least one data visualization (Progress Ring, Gauge, Funnel, or Trend Indicator)
- Lead with insights, not tables - tables should support your analysis if used at all
- Use colored elements strategically - red for critical, orange for warning, green for positive
- Be specific: use actual names ("Sarah Johnson") not titles ("the CFO")
- ONLY use merge fields from the AVAILABLE MERGE FIELDS section

QUALITY CHECKLIST:
[ ] Did I lead with the most important finding (not bury it)?
[ ] Did I match visualizations to data patterns (see DATA-DRIVEN DESIGN GUIDANCE)?
[ ] Did I use at least 3 different component types?
[ ] Does every insight cite specific evidence?
[ ] Are recommendations specific and actionable with names?
[ ] Did I ONLY use merge fields from the AVAILABLE MERGE FIELDS list?
[ ] Would this dashboard make an executive take immediate action?

Generate the dashboard now. Output raw HTML only.



--- GROUNDING RULES ---
**Grounding Rules:**

1. **Accuracy:** Use ONLY data from the provided Account record. Never fabricate company names or contact details.
2. **Tone:** Maintain a professional, enterprise-appropriate tone for Sales Rep managing account portfolios and driving revenue growth.
3. **Format:** Preserve the HTML structure with inline styles. Do NOT use CSS classes.
4. **Consistency:** Use consistent date formats (MM/DD/YYYY), currency formats ($X,XXX), and terminology.
5. **Relevance:** Focus on insights that align with the business objectives.
6. **ANALYZE AND INTERPRET:** Go beyond raw data display. Identify patterns, risks, opportunities, and provide actionable recommendations.


=== AVAILABLE MERGE FIELDS ===

Use these merge fields to reference Salesforce data in your HTML output.
GPTfy will substitute these with actual values at runtime.

ACCOUNT (Root Object) - use triple braces:
  {{{Id}}}
  {{{Name}}}
  {{{Industry}}}
  {{{AnnualRevenue}}}
  {{{NumberOfEmployees}}}
  {{{Phone}}}
  {{{Website}}}
  {{{BillingAddress}}}

OPPORTUNITYCONTACTROLE (Grandchild of Opportunity):
  Nested iteration: {{#Opportunities}}{{#Opportunities.OpportunityContactRoles}}...{{/Opportunities.OpportunityContactRoles}}{{/Opportunities}}
  Use chained path prefix Opportunities.OpportunityContactRoles for these fields:
    {{{Opportunities.OpportunityContactRoles.Id}}}
    {{{Opportunities.OpportunityContactRoles.Role}}}
    {{{Opportunities.OpportunityContactRoles.IsPrimary}}}
    {{{Opportunities.OpportunityContactRoles.ContactId}}}
    {{{Opportunities.OpportunityContactRoles.OpportunityId}}}

TASK (Child) - iterate with {{#Tasks}}...{{/Tasks}}:
  Start iteration: {{#Tasks}}
    {{{Tasks.Id}}}
    {{{Tasks.Subject}}}
    {{{Tasks.Status}}}
    {{{Tasks.Priority}}}
    {{{Tasks.ActivityDate}}}
    {{{Tasks.Description}}}
    {{{Tasks.OwnerId}}}
  End iteration: {{/Tasks}}
  Empty check: {{^Tasks}}No Task records{{/Tasks}}

CONTACT (Child) - iterate with {{#Contacts}}...{{/Contacts}}:
  Start iteration: {{#Contacts}}
    {{{Contacts.Id}}}
    {{{Contacts.Name}}}
    {{{Contacts.Email}}}
    {{{Contacts.Phone}}}
    {{{Contacts.Title}}}
    {{{Contacts.MailingAddress}}}
  End iteration: {{/Contacts}}
  Empty check: {{^Contacts}}No Contact records{{/Contacts}}

CASE (Child) - iterate with {{#Cases}}...{{/Cases}}:
  Start iteration: {{#Cases}}
    {{{Cases.Id}}}
    {{{Cases.CaseNumber}}}
    {{{Cases.Subject}}}
    {{{Cases.Status}}}
    {{{Cases.Priority}}}
    {{{Cases.Type}}}
    {{{Cases.Description}}}
    {{{Cases.ClosedDate}}}
    {{{Cases.IsEscalated}}}
  End iteration: {{/Cases}}
  Empty check: {{^Cases}}No Case records{{/Cases}}

OPPORTUNITY (Child) - iterate with {{#Opportunities}}...{{/Opportunities}}:
  Start iteration: {{#Opportunities}}
    {{{Opportunities.Id}}}
    {{{Opportunities.Name}}}
    {{{Opportunities.StageName}}}
    {{{Opportunities.Amount}}}
    {{{Opportunities.CloseDate}}}
    {{{Opportunities.Probability}}}
    {{{Opportunities.Type}}}
    {{{Opportunities.NextStep}}}
    {{{Opportunities.Description}}}
  End iteration: {{/Opportunities}}
  Empty check: {{^Opportunities}}No Opportunity records{{/Opportunities}}

CRITICAL RESTRICTION:
You may ONLY use merge fields that are explicitly listed above.
Do NOT invent or guess merge fields. Do NOT use relationships not shown above.
If a field or relationship is not listed, you cannot use it.
